# weather4you

Это апи сервис, который показывает подробные предсказания погоды на конкретное время

## Инструкция по установке

Для работы данного сервиса нужно:
1. в файле config/config.json добавить свой ключ для работы с апи openweather
2. и создать локальную бд postgres с названием "weather4you"(в конфиге можно поменять)
3. go install
5. make local_build
4. make migrate_up
6. go run cmd/main.go

Миграции применяются автоматически при запуске программы
Базовый список городов тоже находится в конфиге

## Описание ендпоинтов:

### Получение списка городов:

#### пример запроса: 
`localhost:8080/list/`

#### пример ответа: 
`[
    {
        "name": "Moscow"
    },
    {
        "name": "Saint Petersburg"
    },
    {
        "name": "London"
    },
    ...
    {
        "name": "Warsaw"
    }
]`


### Получение списка городов с кратким предсказанием

#### пример запроса:
`localhost:8080/predictions/`

#### пример ответа:
`[
    {
        "name": "Boston",
        "country": "US",
        "average_temp": 25,
        "prediction_dates": [
            "2024-07-12T09:00:00Z",
            "2024-07-12T12:00:00Z",
            "2024-07-12T15:00:00Z",
            "2024-07-12T18:00:00Z",
            "2024-07-12T21:00:00Z",
            "2024-07-13T00:00:00Z",
            "2024-07-13T03:00:00Z",
            "2024-07-13T06:00:00Z",
            "2024-07-13T09:00:00Z",
            "2024-07-13T12:00:00Z",
            "2024-07-13T15:00:00Z",
            "2024-07-13T18:00:00Z",
            "2024-07-13T21:00:00Z",
            "2024-07-14T00:00:00Z",
            "2024-07-14T03:00:00Z",
            "2024-07-14T06:00:00Z",
            "2024-07-14T09:00:00Z",
            "2024-07-14T12:00:00Z",
            "2024-07-14T15:00:00Z",
            "2024-07-14T18:00:00Z",
            "2024-07-14T21:00:00Z",
            "2024-07-15T00:00:00Z",
            "2024-07-15T03:00:00Z",
            "2024-07-15T06:00:00Z",
            "2024-07-15T09:00:00Z",
            "2024-07-15T12:00:00Z",
            "2024-07-15T15:00:00Z",
            "2024-07-15T18:00:00Z",
            "2024-07-15T21:00:00Z",
            "2024-07-16T00:00:00Z",
            "2024-07-16T03:00:00Z",
            "2024-07-16T06:00:00Z",
            "2024-07-16T09:00:00Z",
            "2024-07-16T12:00:00Z",
            "2024-07-16T15:00:00Z",
            "2024-07-16T18:00:00Z",
            "2024-07-16T21:00:00Z"
        ]
    },
    {
        "name": "Munich",
        "country": "DE",
        "average_temp": 18,
        "prediction_dates": [
            "2024-07-12T09:00:00Z",
            "2024-07-12T12:00:00Z",
            "2024-07-12T15:00:00Z",
            "2024-07-12T18:00:00Z",
            "2024-07-12T21:00:00Z",
            "2024-07-13T00:00:00Z",
            "2024-07-13T03:00:00Z",
            "2024-07-13T06:00:00Z",
            "2024-07-13T09:00:00Z",
            "2024-07-13T12:00:00Z",
            "2024-07-13T15:00:00Z",
            "2024-07-13T18:00:00Z",
            "2024-07-13T21:00:00Z",
            "2024-07-14T00:00:00Z",
            "2024-07-14T03:00:00Z",
            "2024-07-14T06:00:00Z",
            "2024-07-14T09:00:00Z",
            "2024-07-14T12:00:00Z",
            "2024-07-14T15:00:00Z",
            "2024-07-14T18:00:00Z",
            "2024-07-14T21:00:00Z",
            "2024-07-15T00:00:00Z",
            "2024-07-15T03:00:00Z",
            "2024-07-15T06:00:00Z",
            "2024-07-15T09:00:00Z",
            "2024-07-15T12:00:00Z",
            "2024-07-15T15:00:00Z",
            "2024-07-15T18:00:00Z",
            "2024-07-15T21:00:00Z",
            "2024-07-16T00:00:00Z",
            "2024-07-16T03:00:00Z",
            "2024-07-16T06:00:00Z",
            "2024-07-16T09:00:00Z",
            "2024-07-16T12:00:00Z",
            "2024-07-16T15:00:00Z",
            "2024-07-16T18:00:00Z",
            "2024-07-16T21:00:00Z"
        ]
    },
    {
        "name": "Saint Petersburg",
        "country": "RU",
        "average_temp": 19,
        "prediction_dates": [
            "2024-07-12T09:00:00Z",
            "2024-07-12T12:00:00Z",
            "2024-07-12T15:00:00Z",
            "2024-07-12T18:00:00Z",
            "2024-07-12T21:00:00Z",
            "2024-07-13T00:00:00Z",
            "2024-07-13T03:00:00Z",
            "2024-07-13T06:00:00Z",
            "2024-07-13T09:00:00Z",
            "2024-07-13T12:00:00Z",
            "2024-07-13T15:00:00Z",
            "2024-07-13T18:00:00Z",
            "2024-07-13T21:00:00Z",
            "2024-07-14T00:00:00Z",
            "2024-07-14T03:00:00Z",
            "2024-07-14T06:00:00Z",
            "2024-07-14T09:00:00Z",
            "2024-07-14T12:00:00Z",
            "2024-07-14T15:00:00Z",
            "2024-07-14T18:00:00Z",
            "2024-07-14T21:00:00Z",
            "2024-07-15T00:00:00Z",
            "2024-07-15T03:00:00Z",
            "2024-07-15T06:00:00Z",
            "2024-07-15T09:00:00Z",
            "2024-07-15T12:00:00Z",
            "2024-07-15T15:00:00Z",
            "2024-07-15T18:00:00Z",
            "2024-07-15T21:00:00Z",
            "2024-07-16T00:00:00Z",
            "2024-07-16T03:00:00Z",
            "2024-07-16T06:00:00Z",
            "2024-07-16T09:00:00Z",
            "2024-07-16T12:00:00Z",
            "2024-07-16T15:00:00Z",
            "2024-07-16T18:00:00Z"
        ]
    },
    ...
    {
        "name": "Madrid",
        "country": "ES",
        "average_temp": 27,
        "prediction_dates": [
            "2024-07-12T09:00:00Z",
            "2024-07-12T12:00:00Z",
            "2024-07-12T15:00:00Z",
            "2024-07-12T18:00:00Z",
            "2024-07-12T21:00:00Z",
            "2024-07-13T00:00:00Z",
            "2024-07-13T03:00:00Z",
            "2024-07-13T06:00:00Z",
            "2024-07-13T09:00:00Z",
            "2024-07-13T12:00:00Z",
            "2024-07-13T15:00:00Z",
            "2024-07-13T18:00:00Z",
            "2024-07-13T21:00:00Z",
            "2024-07-14T00:00:00Z",
            "2024-07-14T03:00:00Z",
            "2024-07-14T06:00:00Z",
            "2024-07-14T09:00:00Z",
            "2024-07-14T12:00:00Z",
            "2024-07-14T15:00:00Z",
            "2024-07-14T18:00:00Z",
            "2024-07-14T21:00:00Z",
            "2024-07-15T00:00:00Z",
            "2024-07-15T03:00:00Z",
            "2024-07-15T06:00:00Z",
            "2024-07-15T09:00:00Z",
            "2024-07-15T12:00:00Z",
            "2024-07-15T15:00:00Z",
            "2024-07-15T18:00:00Z",
            "2024-07-15T21:00:00Z",
            "2024-07-16T00:00:00Z",
            "2024-07-16T03:00:00Z",
            "2024-07-16T06:00:00Z",
            "2024-07-16T09:00:00Z",
            "2024-07-16T12:00:00Z",
            "2024-07-16T15:00:00Z",
            "2024-07-16T18:00:00Z",
            "2024-07-16T21:00:00Z"
        ]
    }
]`


### Получение полного предсказания по городу и времени
нужно подставить название города (name) и дату(date) предсказания в формате ISO 8601
#### пример запроса:
`localhost:8080/prediction/?name=Madrid&date=2024-07-16T09:00:00Z`

#### пример ответа:
`{
    "dt": 1721109600,
    "main": {
        "temp": 23.23,
        "feels_like": 22.42,
        "temp_min": 23.23,
        "temp_max": 23.23,
        "pressure": 1017,
        "sea_level": 1017,
        "grnd_level": 944,
        "humidity": 31,
        "temp_kf": 0
    },
    "weather": [
        {
            "id": 800,
            "main": "Clear",
            "description": "clear sky",
            "icon": "01d"
        }
    ],
    "clouds": {
        "all": 2
    },
    "wind": {
        "speed": 2.13,
        "deg": 69,
        "gust": 3.15
    },
    "visibility": 10000,
    "pop": 0,
    "sys": {
        "pod": "d"
    },
    "dt_txt": "2024-07-16 06:00:00"
}`
